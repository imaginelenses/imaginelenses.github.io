<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Imaginelenses - Setting Up Wake On LAN in Ubuntu</title>

  
  <meta
    http-equiv="Content-Security-Policy"
    content="
      default-src 'self';
      style-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css;
      script-src 'self' https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.min.js https://buttons.github.io/buttons.js;
      img-src 'self' https://*.imaginelenses.com/ https://*.11ty.dev/ https://i.ytimg.com https://upload.wikimedia.org/wikipedia/commons/thumb/6/6a/JavaScript-logo.png/512px-JavaScript-logo.png https://www.w3.org/html/logo/badge/html5-badge-h-solo.png https://img.icons8.com/color/48/null/c-programming.png data: http://www.w3.org/*;
      connect-src https://*.github.com;
      frame-src https://imaginelenses.com/ https://www.youtube-nocookie.com/;
      child-src 'none';
    " 
  />
  

  <meta name="generator" content="Eleventy v2.0.1">
  <meta name="description" content="How to setup Wake On LAN in Ubuntu.">
  <meta name="author" content="Karthik Shivashankar">
  
  
  <meta property="og:url" content="https://imaginelenses.com/blog/wake-on-lan-setup/">
  <meta property="og:type" content="article">
  <meta property="og:site_name" content="Imaginelenses">
  <meta property="og:title" content="Setting Up Wake On LAN in Ubuntu">
  <meta property="og:description" content="How to setup Wake On LAN in Ubuntu.">
  <meta property="og:image" content="https://v1.screenshot.11ty.dev/https%3A%2F%2Fimaginelenses.com%2Fblog%2Fwake-on-lan-setup%2F/opengraph/_20250117T0445444340530">

  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:site" content="@imaginelenses">
  <meta property="twitter:creator" content="@imaginelenses">
  
  <meta property="profile:first_name" content="Karthik">
  <meta property="profile:last_name" content="Shivashankar">
  <meta property="profile:username" content="imaginelenses">
  <meta property="profile:gender" content="male">
  
  <meta property="article:published_time" content="2023-06-15T00:00:00.000+05:30">
  <meta property="article:modified_time" content="2023-06-15T00:00:00.000+05:30">
  <meta property="article:author" content="https://imaginelenses.com/">
  <meta property="article:section" content="Technology">
  
  <meta property="article:tag" content="ubuntu">
  
  <meta property="article:tag" content="server">
  
  <meta property="article:tag" content="homelab">
  

  <!-- Preconnect to Eleventy services -->
  <link href="https://v1.opengraph.11ty.dev" rel="preconnect" crossorigin>
  <link href="https://v1.indieweb-avatar.11ty.dev" rel="preconnect" crossorigin>

  <link rel="icon" href="/media/icons/favicon.ico" type="image/x-icon">
  
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">

  
  <style>:root{--containedWidth: 50vw;--boxShadow: 0 .5rem 1rem rgba(0, 0, 0, .15)}.nav-item{font-size:var(--bs-nav-link-font-size)}.navbar-brand{font-size:32px;letter-spacing:1.5px;user-select:none}.navbar-toggler:focus{box-shadow:none !important}.content{display:flex;flex-direction:column;align-items:center;color:var(--bs-gray-800)}h1,h2,h3,h4,h5,h6,p,ol,ul,hr,time,.contained,pre,blockquote,summary{height:auto;width:var(--containedWidth) !important;max-width:800px}.navbar-collapse>ul{width:auto !important}.fullWidth,.tableWrapper{height:auto;width:min(95vw,var(--containedWidth) + 10vw);margin-top:1rem;margin-bottom:3rem;box-shadow:var(--boxShadow)}h2,h3,summary{margin-top:min(5%,40px);text-transform:uppercase;font-weight:500;color:var(--bs-gray-900)}h2 a[id]>svg,h3 a[id]>svg,summary a[id]>svg{height:.8em;margin:0 0 .1em 5px;fill:var(--bs-gray-800);scale:0;transition:scale ease-in 50ms}summary{font-size:larger;margin-top:0;margin-bottom:1rem}h3{margin-top:min(2.5%,20px)}h2:hover a[id]>svg,h3:hover a[id]>svg{scale:100%}h2::after{content:"";display:block;margin:10px 0px 30px 0px;height:1px;width:100%;background:var(--bs-gray-500)}h4{margin-top:10px}li>h4{width:auto !important}.title{font-size:5em;font-weight:570;text-transform:uppercase;color:var(--bs-black);line-height:1;overflow:auto hidden}p,li{font-size:1.5em;text-align:justify}a,li>h4{color:var(--bs-gray-800);text-decoration-color:var(--bs-primary);text-transform:none;font-weight:400}a:hover{color:var(--bs-primary)}a[style]::before{content:"";display:inline-block;height:1em;width:1em;margin:0 4px 1px 0;vertical-align:text-bottom;background-image:var(--icon);background-size:contain}pre{display:flex;flex-direction:row;padding:1em;gap:.5em;justify-content:space-between;align-items:start;margin-bottom:20px !important;background-color:#000 !important}pre::after{content:"";display:inline-block;height:1.3em;aspect-ratio:1;margin-top:.25em;opacity:0;transition:700ms;cursor:pointer;background:url(/media/icons/clipboard.svg);background-repeat:no-repeat}pre[data-copied]::after{transition:700ms;cursor:default;background:url(/media/icons/check2.svg)}pre:hover::after{opacity:1;transition:200ms}code{padding:2px 5px;user-select:all;color:var(--bs-gray-900);border-radius:5%;background:var(--bs-gray-300)}blockquote,blockquote>a{font-size:27px;font-style:italic;font-weight:300}blockquote{text-align:justify;padding:5px 15px 5px 10px;border-style:solid;border-width:0;border-left-width:8px;border-color:var(--bs-gray-200);background:var(--bs-gray-100)}blockquote::before,blockquote::after{font-size:30px;font-weight:400;color:var(--bs-gray-500)}blockquote::before{content:open-quote}blockquote::after{content:close-quote}.tableWrapper{box-shadow:none;overflow:auto}table{border-collapse:collapse}table th{text-transform:uppercase;border-style:solid;border-color:var(--bs-gray-500);border-width:0;border-bottom-width:1px}table th,table td{padding:1rem}table thead>tr,table tr:nth-of-type(2n){background-color:#f8f8f8}footer{display:flex;flex-direction:column;justify-content:center;align-items:center;width:100%;margin:100px 0 20px 0}.social{margin-bottom:15px}.social a{text-decoration:none;margin:0px 5px}.social .bi{height:30px}.social a:hover .bi-linkedin{fill:#0077b5}.social a:hover .bi-github{fill:#000}.social a:hover .bi-youtube{fill:red}@media only screen and (max-width: 1400px){:root{--containedWidth: max(calc(1200px * 0.8), 70vw)}}@media only screen and (max-width: 1200px){:root{--containedWidth: max(calc(600px * 0.95), 80vw)}}@media only screen and (max-width: 600px){:root{--containedWidth: 95vw}.navbar>div{padding-right:0;padding-left:0}.title{font-size:3em}}</style>
  
  <style>.tag{--spacer: 2px;margin-right:var(--spacer);margin-left:var(--spacer);padding:3px 5px;text-transform:uppercase;text-decoration:none;border-style:solid;border-width:1px;border-radius:3px;border-color:var(--bs-gray);color:var(--bs-gray);font-size:small;user-select:none;white-space:nowrap}.tag:hover{text-decoration:none;color:#fff;background-color:var(--bs-gray-600)}.prev,.next{position:absolute;width:50%;text-transform:uppercase;font-weight:500;color:var(--bs-gray-800)}.prev a,.next a{font-size:large}.prev a div,.next a div{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.prev{left:0}.next{right:0;text-align:end}</style>
  

  
  <link href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="stylesheet">

</head>
<body class="d-flex flex-column min-vh-100">
  <header>
    <nav class="navbar navbar-expand-lg p-3">
      <div class="container-fluid">
        <a class="navbar-brand" href="/">Imaginelenses</a>
        <button class="navbar-toggler border-0 pe-0" type="button" data-bs-toggle="collapse" data-bs-target="#navbarToggle" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarToggle">
          <ul class="navbar-nav ms-auto my-2 my-lg-0 align-items-end">
            
              <li class="nav-item">
                <a 
                  
                    class="nav-link" href="/">
                  
                  Home
                </a>
              </li>
            
              <li class="nav-item">
                <a 
                  
                    class="nav-link" href="/projects/">
                  
                  Projects
                </a>
              </li>
            
              <li class="nav-item">
                <a 
                  
                    class="nav-link" href="/photo/">
                  
                  Photography
                </a>
              </li>
            
              <li class="nav-item">
                <a 
                  
                    class="nav-link" href="/blog/">
                  
                  Blog
                </a>
              </li>
            
              <li class="nav-item">
                <a 
                  
                    class="nav-link" href="/about/">
                  
                  About
                </a>
              </li>
            
          </ul>
        </div>
      </div>
    </nav>
  </header>

  <main class="flex-grow-1 flex-shrink-1">
    
      
<div class="content">
  <h1 class="title">Setting Up Wake On LAN in Ubuntu</h1>
  
  <div class="contained mb-5">
    <time datetime="2023-06-15" class="me-2">15 Jun 2023</time>
    
      
      <a href="/tags/ubuntu" class="tag">ubuntu</a>
    
      
      <a href="/tags/server" class="tag">server</a>
    
      
      <a href="/tags/homelab" class="tag">homelab</a>
    
  </div>

  <p><a href="https://en.wikipedia.org/wiki/Wake-on-LAN">Wake On LAN</a> (WOL) allows you to turn on the computer from another device in the same network.</p>
<h2>Determining Network Interface Card (NIC) name<a id="determining-network-interface-card-nic-name" href="#determining-network-interface-card-nic-name" role="button" aria-label="Link to Determining Network Interface Card (NIC) name."><svg xmlns="http://www.w3.org/2000/svg" class="bi bi-link-45deg" viewBox="0 0 16 16"><path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"/><path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z"/></svg></a></h2>
<pre class="language-bash"><code class="language-bash"><span class="token function">sudo</span> lshw <span class="token parameter variable">-c</span> network</code></pre>
<p>Under the <code>Ethernet Interface</code> copy the <code>logical name</code>.</p>
<h2>Enabling WOL in the BIOS<a id="enabling-wol-in-the-bios" href="#enabling-wol-in-the-bios" role="button" aria-label="Link to Enabling WOL in the BIOS."><svg xmlns="http://www.w3.org/2000/svg" class="bi bi-link-45deg" viewBox="0 0 16 16"><path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"/><path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z"/></svg></a></h2>
<h3>Using Integrated NIC<a id="using-integrated-nic" href="#using-integrated-nic" role="button" aria-label="Link to Using Integrated NIC."><svg xmlns="http://www.w3.org/2000/svg" class="bi bi-link-45deg" viewBox="0 0 16 16"><path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"/><path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z"/></svg></a></h3>
<p>In the BIOS enable &quot;Wake up on PCI event&quot;, &quot;Wake up on LAN&quot; or similar option.</p>
<h3>Using Non-Integrated NIC<a id="using-non-integrated-nic" href="#using-non-integrated-nic" role="button" aria-label="Link to Using Non-Integrated NIC."><svg xmlns="http://www.w3.org/2000/svg" class="bi bi-link-45deg" viewBox="0 0 16 16"><path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"/><path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z"/></svg></a></h3>
<p>In the BIOS enable the option to allow USB and/or PCI devices to wake-up the computer.</p>
<h2>Determining WOL support in NIC<a id="determining-wol-support-in-nic" href="#determining-wol-support-in-nic" role="button" aria-label="Link to Determining WOL support in NIC."><svg xmlns="http://www.w3.org/2000/svg" class="bi bi-link-45deg" viewBox="0 0 16 16"><path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"/><path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z"/></svg></a></h2>
<pre class="language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">ethtool</span> <span class="token operator">&lt;</span>name<span class="token operator">></span></code></pre>
<p>where <code>&lt;name&gt;</code> is the <code>logical name</code> you copied.</p>
<p>The output would contain a line similar to <code>Supports Wake-on: &lt;letters&gt;</code> where <code>&lt;letters&gt;</code> contains the letter <code>g</code>, the NIC should support the <a href="https://en.wikipedia.org/wiki/Wake-on-LAN#Magic_packet">WOL Magic Packet</a>.</p>
<h2>Enabling WOL in the NIC<a id="enabling-wol-in-the-nic" href="#enabling-wol-in-the-nic" role="button" aria-label="Link to Enabling WOL in the NIC."><svg xmlns="http://www.w3.org/2000/svg" class="bi bi-link-45deg" viewBox="0 0 16 16"><path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"/><path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z"/></svg></a></h2>
<p>The above output would also contain a line similar to <code>Wake-on: &lt;letters&gt;</code> and if <code>&lt;letters&gt;</code> contains <code>g</code> and not <code>d</code>, then Magic Packet is enabled. However, if <letters> does contain d, WoL needs to be enabled by running</p>
<pre class="language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">ethtool</span> <span class="token parameter variable">-s</span> <span class="token operator">&lt;</span>name<span class="token operator">></span> wol g</code></pre>
<h2>Enabling WOL on every boot<a id="enabling-wol-on-every-boot" href="#enabling-wol-on-every-boot" role="button" aria-label="Link to Enabling WOL on every boot."><svg xmlns="http://www.w3.org/2000/svg" class="bi bi-link-45deg" viewBox="0 0 16 16"><path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"/><path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z"/></svg></a></h2>
<p>Find the path to <code>ethtool</code> running the following and copy the output.</p>
<pre class="language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">which</span> <span class="token function">ethtool</span></code></pre>
<p>Create a file named <code>wol.service</code> at <code>/etc/systemd/system/</code>.</p>
<pre class="language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">nano</span> /etc/systemd/system/wol.service</code></pre>
<p>Paste the following</p>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">[</span>Unit<span class="token punctuation">]</span><br><span class="token assign-left variable">Description</span><span class="token operator">=</span>Enable Wake On Lan<br><br><span class="token punctuation">[</span>Service<span class="token punctuation">]</span><br><span class="token assign-left variable">Type</span><span class="token operator">=</span>oneshot<br><span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/usr/sbin/ethtool <span class="token parameter variable">-s</span> <span class="token operator">&lt;</span>name<span class="token operator">></span> wol g<br><br><span class="token punctuation">[</span>Install<span class="token punctuation">]</span><br><span class="token assign-left variable">WantedBy</span><span class="token operator">=</span>basic.target</code></pre>
<p><code>Ctrl+S</code> to save and <code>Ctrl+X</code> to exit.</p>
<p>Restart and enable the service.</p>
<pre class="language-bash"><code class="language-bash"><span class="token function">sudo</span> systemctl daemon-reload<br><span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> wol.service</code></pre>
<p>Check whether the service is running.</p>
<pre class="language-bash"><code class="language-bash">systemctl status wol</code></pre>
<h2>Testing WOL<a id="testing-wol" href="#testing-wol" role="button" aria-label="Link to Testing WOL."><svg xmlns="http://www.w3.org/2000/svg" class="bi bi-link-45deg" viewBox="0 0 16 16"><path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"/><path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z"/></svg></a></h2>
<h3>Installing gWakeOnLan<a id="installing-gwakeonlan" href="#installing-gwakeonlan" role="button" aria-label="Link to Installing gWakeOnLan."><svg xmlns="http://www.w3.org/2000/svg" class="bi bi-link-45deg" viewBox="0 0 16 16"><path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"/><path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z"/></svg></a></h3>
<p><a href="https://www.muflone.com/gwakeonlan/english/download.html">Download</a> <code>gwakeonlan</code> on a different computer running Ubuntu or use <a href="https://learn.microsoft.com/en-us/windows/wsl/install">WSL</a>.</p>
<p>Navigate to the downloads folder and run</p>
<pre class="language-bash"><code class="language-bash"><span class="token function">sudo</span> dpkg <span class="token parameter variable">-i</span> ~/<span class="token operator">&lt;</span>downloads<span class="token operator">></span>/<span class="token operator">&lt;</span>filename<span class="token operator">></span>.deb</code></pre>
<p>where <code>&lt;downloads&gt;</code> is the folder with the downloaded file and <code>&lt;filename&gt;</code> is the name of the file.</p>
<h3>Finding MAC address<a id="finding-mac-address" href="#finding-mac-address" role="button" aria-label="Link to Finding MAC address."><svg xmlns="http://www.w3.org/2000/svg" class="bi bi-link-45deg" viewBox="0 0 16 16"><path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"/><path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z"/></svg></a></h3>
<p>To find the <a href="https://en.wikipedia.org/wiki/MAC_address">MAC address</a> of the target computer run</p>
<pre class="language-bash"><code class="language-bash"><span class="token function">ip</span> addr show</code></pre>
<p>Against your NIC name you should find a sequence of the format <code>FF:FF:FF:FF:FF:FF</code>. Copy this.</p>
<h3>Listening for the MagicPacket<a id="listening-for-the-magicpacket" href="#listening-for-the-magicpacket" role="button" aria-label="Link to Listening for the MagicPacket."><svg xmlns="http://www.w3.org/2000/svg" class="bi bi-link-45deg" viewBox="0 0 16 16"><path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"/><path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z"/></svg></a></h3>
<p>On the computer you want to turn on, run the following</p>
<pre class="language-bash"><code class="language-bash"><span class="token function">sudo</span> tcpdump <span class="token parameter variable">-UlnXi</span> <span class="token operator">&lt;</span>name<span class="token operator">></span> ether proto 0x0842 or udp port <span class="token number">9</span> <span class="token operator"><span class="token file-descriptor important">2</span>></span>/dev/null <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-P</span> <span class="token string">'((25[0-5]|(2[0-4]|1[0-9]|[1-9]|)[0-9])(\.(?!$)|$)){4}'</span></code></pre>
<p>where <code>&lt;name&gt;</code> is the name of the NIC. You should see 1 line of output per Magic Packet received with IP address of the device sending the packet.</p>
<p><strong>Note:</strong> If your router supports sending Magic Packets you can send it on startup of the router and skip the following.</p>
<h2>Setting up WOL on ESPHome<a id="setting-up-wol-on-esphome" href="#setting-up-wol-on-esphome" role="button" aria-label="Link to Setting up WOL on ESPHome."><svg xmlns="http://www.w3.org/2000/svg" class="bi bi-link-45deg" viewBox="0 0 16 16"><path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"/><path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z"/></svg></a></h2>
<p>Paste the following to you ESPHome's <code>yaml</code> file.</p>
<h3>Adding a Button<a id="adding-a-button" href="#adding-a-button" role="button" aria-label="Link to Adding a Button."><svg xmlns="http://www.w3.org/2000/svg" class="bi bi-link-45deg" viewBox="0 0 16 16"><path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"/><path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z"/></svg></a></h3>
<pre class="language-yaml"><code class="language-yaml"><span class="token comment"># HA Server</span><br><span class="token key atrule">button</span><span class="token punctuation">:</span><br>  <span class="token punctuation">-</span> <span class="token key atrule">platform</span><span class="token punctuation">:</span> wake_on_lan<br>    <span class="token key atrule">id</span><span class="token punctuation">:</span> <span class="token string">"start_server"</span><br>    <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">"Start the Server"</span><br>    <span class="token key atrule">target_mac_address</span><span class="token punctuation">:</span> &lt;MAC<span class="token punctuation">></span></code></pre>
<p>where <code>&lt;MAC&gt;</code> is the MAC address of the computer you want to turn on.</p>
<h3>Configuring ESPHome to press the button on Startup<a id="configuring-esphome-to-press-the-button-on-startup" href="#configuring-esphome-to-press-the-button-on-startup" role="button" aria-label="Link to Configuring ESPHome to press the button on Startup."><svg xmlns="http://www.w3.org/2000/svg" class="bi bi-link-45deg" viewBox="0 0 16 16"><path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"/><path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z"/></svg></a></h3>
<pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">esphome</span><span class="token punctuation">:</span><br>  <span class="token comment"># ...</span><br>  <span class="token key atrule">on_boot</span><span class="token punctuation">:</span><br>    <span class="token key atrule">priority</span><span class="token punctuation">:</span> <span class="token number">800</span><br>    <span class="token key atrule">then</span><span class="token punctuation">:</span><br>      <span class="token punctuation">-</span> <span class="token key atrule">wait_until</span><span class="token punctuation">:</span> <br>          <span class="token key atrule">wifi.connected</span><span class="token punctuation">:</span><br>      <span class="token punctuation">-</span> <span class="token key atrule">button.press</span><span class="token punctuation">:</span> <span class="token string">"start_server"</span></code></pre>
<p>where <code>...</code> represents additional configuration you may already have.</p>
<p>Save and install the code.</p>
<p>You can now test by listening for the Magic Packet by pressing the button manually and then by turning off and on both the server and ESPHome (turn off and on the main supply).</p>

  
  
    
    
      
    <hr>

    <div class="contained position-relative">
      
        <div class="prev">
          PREVIOUS
          <a href="/blog/static-ip-setup/">
            <div>Setting Up Static IP in Ubuntu</div>
          </a>
        </div>
      
          
      
      <div class="next">
        NEXT
        <a href="/blog/person-info-card/">
          <div>Custom Person Card for Home Assistant</div>
        </a>
      </div>
      
    </div>

  
</div>


    
  </main>

  <footer>
    <div class="social">
      <a href="https://github.com/imaginelenses" target="_blank" role="button" aria-label="Checkout my GitHub.">
        <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-github" viewBox="0 0 16 16">
          <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
        </svg>
      </a>

      <a href="https://www.youtube.com/@imaginelenses" target="_blank" role="button" aria-label="Checkout my YouTube channel.">
        <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-youtube" viewBox="0 0 16 16">
          <path d="M8.051 1.999h.089c.822.003 4.987.033 6.11.335a2.01 2.01 0 0 1 1.415 1.42c.101.38.172.883.22 1.402l.01.104.022.26.008.104c.065.914.073 1.77.074 1.957v.075c-.001.194-.01 1.108-.082 2.06l-.008.105-.009.104c-.05.572-.124 1.14-.235 1.558a2.007 2.007 0 0 1-1.415 1.42c-1.16.312-5.569.334-6.18.335h-.142c-.309 0-1.587-.006-2.927-.052l-.17-.006-.087-.004-.171-.007-.171-.007c-1.11-.049-2.167-.128-2.654-.26a2.007 2.007 0 0 1-1.415-1.419c-.111-.417-.185-.986-.235-1.558L.09 9.82l-.008-.104A31.4 31.4 0 0 1 0 7.68v-.123c.002-.215.01-.958.064-1.778l.007-.103.003-.052.008-.104.022-.26.01-.104c.048-.519.119-1.023.22-1.402a2.007 2.007 0 0 1 1.415-1.42c.487-.13 1.544-.21 2.654-.26l.17-.007.172-.006.086-.003.171-.007A99.788 99.788 0 0 1 7.858 2h.193zM6.4 5.209v4.818l4.157-2.408L6.4 5.209z"/>
        </svg>
      </a>

      <a href="https://www.linkedin.com/in/imaginelenses/" target="_blank" role="button" aria-label="Checkout my LinkedIn page.">
        <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-linkedin" viewBox="0 0 16 16">
          <path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z"/>
        </svg>
      </a>
    </div>
    
    &#169; 2025 Imaginelenses
  </footer>

  <script src="/js/copy.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.min.js" integrity="sha384-IDwe1+LCz02ROU9k972gdyvl+AESN10+x7tBKgc9I5HFtuNz0wWnPclzo6p9vxnk" crossorigin="anonymous"></script>
</body>
</html>